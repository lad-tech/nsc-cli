
## Правила Описания Ресурсов для API

    - Для описания методов апи стремимся имспользовать стандарт JSON API, в рамках интересующих нас частей спецификации

### Общие Принципы

1. **Соответствие REST принципам**:
    - Использование стандартных HTTP методов (GET, POST, PATCH, DELETE).

2. **Версионирование маршрутов**:
    - Каждый маршрут должен начинаться с его версии, например, `/v1`.

3. **Уникальные маршруты для сущностей**:
    - Например, `/v1/users` для пользователей, `/v1/posts` для постов и т.д.

4. **Поддержка Пагинации**:
    - В запросе пагинация передается через query параметры `page` и `size`.
    - В ответе пагинация передается в объекте `meta` с полями:
        - `page`: текущая страница.
        - `size`: количество элементов на странице.
        - `total`: общее количество элементов.

5. **Сортировка**:
    - Использование query параметра `sort` для сортировки результатов.
    - Формат параметра: `поле` + `знак`, где знак `-` обозначает сортировку по убыванию.
    - Примеры:
        - `sort=name`: сортировка по имени в порядке возрастания.
        - `sort=-age`: сортировка по возрасту в порядке убывания.

6. **Фильтрация**:
    - Использование query параметра `filter` для фильтрации результатов.
    - Формат параметра: `filter[поле]=значение1,значение2,...`.
    - Примеры:
        - `filter[price]=100,200`: фильтрация по цене 100 или 200.
        - `filter[color]=red,black,white`: фильтрация по цветам: красный, черный, белый.

7. **Обработка Ошибок**:
    - Все ошибки в API имеют единый стандарт
    - Сообщения об ошибках в формате JSON:
      ```json
      {
        "errors": [
          {
            "name": "string",
            "message": "string",
            "statusCode": 511
          }
        ]
      }
      ```

### Пример Построения Методов для Работы с Сущностью `user`

#### Пример Сущности `user`:
```json
{
  "id": "124124",
  "name": "vasya",
  "email": "vasya@qq.ru",
  "age": 150
}
```

#### 1. Получение Списка Пользователей (GET /v1/users)

- **Пагинация**: Параметры запроса `page` и `size`.
- **Сортировка**: Параметр запроса `sort`.
- **Фильтрация**: Параметр запроса `filter`.
- **Пример запроса**: `GET /v1/users?page=1&size=10&sort=-age&filter[age]=150&filter[email]=vasya@qq.ru`
- **Пример успешного ответа**:
  ```json
  {
    "meta": {
      "sort": [
        {
          "key": "age",
          "name": "По возрасту (возрастание)"
        },
        {
          "key": "-age",
          "name": "По возрасту (убывание)"
        },
        {
          "key": "name",
          "name": "По имени (возрастание)"
        },
        {
          "key": "-name",
          "name": "По имени (убывание)"
        }
      ],
      "page": 1,
      "size": 10,
      "total": 100
    },
    "data": [
      {
        "id": "124124",
        "name": "vasya",
        "email": "vasya@qq.ru",
        "age": 150
      }
      // другие пользователи...
    ],
    "filters": [
      {
        "key": "age",
        "name": "Возраст",
        "values": {
          "min": 18,
          "max": 150
        },
        "type": "RANGE"
      },
      {
        "key": "email",
        "name": "Электронная почта",
        "values": [
          {
            "count": 1,
            "value": "vasya@qq.ru",
            "label": "vasya@qq.ru"
          }
        ],
        "type": "CHECKBOX"
      }
    ]
  }
  ```

#### 2. Создание Нового Пользователя (POST /v1/users)

- **Тело запроса**: Данные нового пользователя.
- **Пример запроса**:
  ```json
  {
    "name": "новое имя",
    "email": "новый_email@example.com",
    "age": 25
  }
  ```
- **Пример успешного ответа**: HTTP статус 201, с телом ответа:
  ```json 
  {
    "data":{
    "id": "124124",
    "name": "новое имя",
    "email": "новый_email@example.com",
    "age": 25
  }
  }

  ```

#### 3. Получение Информации о Конкретном Пользователе (GET /v1/users/{id})

- **Пример запроса**: `GET /v1/users/124124`
- **Пример успешного ответа**:
  ```json
    {
    "data":{
    "id": "124124",
    "name": "vasya",
    "email": "vasya@qq.ru",
    "age": 150
  }
  ```

#### 4. Обновление Информации о Пользователе (PATCH /v1/users/{id})

- **Тело запроса**: Обновленные данные пользователя.
- **Пример запроса**:
  ```json
  {
    "name": "новое имя",
    "email": "новый_email@example.com",
    "age": 30
  }
  ```
- **Пример успешного ответа**: HTTP статус 200 (OK), с телом ответа:
  ```json
  { 
  "data":{
    "id": "124124",
    "name": "новое имя",
    "email": "новый_email@example.com",
    "age": 30
  }
  }
  ```

#### 5. Удаление Пользователя (DELETE /v1/users/{id})

- **Пример запроса**: `DELETE /v1/users/124124`
- **Пример успешного ответа**: HTTP статус 200, с телом ответа:
  ```json
  {
  "data":{
    "id": "124124",
    "name": "vasya",
    "email": "vasya@qq.ru",
    "age": 150
  }
  }
  ```

### Пример Ответа с Мета-Информацией, Данными и Фильтрами

Пример ответа, который может содержать поля в подобной структуре - для формирования ответа может быть передана метаинформация, в которой могут быть отражены дополнительные данные:
```json
{
  "meta": {
    "sort": [
      {
        "key": "quantity",
        "name": "По максимальному остатку"
      },
      {
        "key": "-quantity",
        "name": "По минимальному остатку"
      },
      {
        "key": "price",
        "name": "Цена по убыванию"
      },
      {
        "key": "-price",
        "name": "Цена по возрастанию"
      }
    ],
    "page": 0,
    "size": 24,
    "total": 1
  },
  "data": [
    {
      "id": "42c508f7-14aa-4165-9973-6c41bf4aa986",
      "name": "Куртка",
      "description": "Мужская куртка для холодной погоды.",
      "categoryId": "cba8cbd3-8d7b-433f-bf27-5e4f5ea07b07",
      "article": "JACKET001",
      "price": 129.99,
      "quantity": 25,
      "images": [
        "jacket_front.jpg",
        "jacket_back.jpg"
      ],
      "props": {
        "brand": "OutdoorGear",
        "size": "L",
        "color": "Black"
      }
    }
  ],
  "filters": [
    {
      "key": "price",
      "name": "Цена",
      "values": {
        "min": 129.99000549316406,
        "max": 129.99000549316406
      },
      "type": "RANGE"
    },
    {
      "key": "category",
      "name": "Категория",
      "values": [
        {
          "count": 1,
          "value": "cba8cbd3-8d7b-433f-bf27-5e4f5ea07b07",
          "label": "cba8cbd3-8d7b-433f-bf27-5e4f5ea07b07"
        }
      ],
      "type": "CHECKBOX"
    },
    {
      "key": "color",
      "name": "Цвет",
      "values": [
        {
          "count": 1,
          "value": "Black",
          "label": "Black"
        }
      ],
      "type": "CHECKBOX"
    }
  ]
}
```
