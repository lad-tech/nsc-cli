---
description: Правила для коммитов в стиле Semantic Release (Conventional Commits)
globs: []
alwaysApply: true
---

# Правила коммитов в стиле Semantic Release

## Формат коммитов (Conventional Commits)

Все коммиты должны следовать формату Conventional Commits для совместимости с Semantic Release:

```
<type>(<scope>): <subject>

<body>

<footer>
```

## Типы коммитов

Используй следующие типы коммитов:

- **feat**: Новая функциональность (увеличивает MINOR версию)
- **fix**: Исправление бага (увеличивает PATCH версию)
- **docs**: Изменения в документации
- **style**: Изменения форматирования кода (не влияют на выполнение кода)
- **refactor**: Рефакторинг кода (не добавляет функциональность и не исправляет баги)
- **perf**: Улучшения производительности
- **test**: Добавление или изменение тестов
- **build**: Изменения в системе сборки или внешних зависимостях
- **ci**: Изменения в CI/CD конфигурации
- **chore**: Прочие изменения (не влияют на код пользователя)
- **revert**: Откат предыдущего коммита

## Область (scope)

Область указывает на часть кодовой базы, которую затрагивает коммит:
- Название сервиса (например: `user`, `notifier`, `gate`)
- Название модуля или компонента
- Может быть опущена, если изменения затрагивают весь проект

## Описание (subject)

- Начинается с маленькой буквы
- Не заканчивается точкой
- Используй повелительное наклонение ("добавить", "исправить", "обновить")
- Максимальная длина: 72 символа
- Описывает ЧТО изменено, а не ЗАЧЕМ

## Тело коммита (body)

- Опционально, но рекомендуется для коммитов с типом `feat` или `fix`
- Отделяется от subject пустой строкой
- Объясняет ЗАЧЕМ и КАК были внесены изменения
- Может содержать ссылки на issues/PRs

## Футер (footer)

- Опционально
- Используется для breaking changes: `BREAKING CHANGE: <описание>`
- Может содержать ссылки на issues: `Closes #123`, `Fixes #456`

## Breaking Changes

Для breaking changes используй один из форматов:

1. Добавь `!` после типа и scope: `feat(api)!: изменить формат ответа`
2. Добавь в футер: `BREAKING CHANGE: изменить формат ответа API`

## Примеры правильных коммитов

```
feat(user): добавить аутентификацию через JWT

Реализована система аутентификации пользователей с использованием JWT токенов.
Добавлены эндпоинты для логина и обновления токенов.

Closes #123
```

```
fix(gate): исправить обработку ошибок при валидации запросов

Исправлена проблема, когда некорректные запросы вызывали падение сервиса.
Теперь все ошибки валидации возвращаются с корректным HTTP статусом 400.
```

```
docs: обновить документацию по архитектуре

Добавлены диаграммы взаимодействия сервисов и описание API gateway.
```

```
refactor(notifier): оптимизировать отправку уведомлений

Вынес логику отправки в отдельный класс для улучшения тестируемости.
```

```
feat(api)!: изменить формат ответа на JSON API

BREAKING CHANGE: Все эндпоинты теперь возвращают данные в формате JSON API.
Необходимо обновить клиентские приложения.
```

```
chore: обновить зависимости

Обновлены пакеты в package.json для устранения уязвимостей безопасности.
```

## Правила для Cursor

1. **Всегда используй формат Conventional Commits** при создании коммитов
2. **Выбирай правильный тип** в зависимости от характера изменений
3. **Указывай scope**, если изменения затрагивают конкретный сервис или модуль
4. **Пиши понятные описания** на русском языке
5. **Добавляй body** для коммитов типа `feat` и `fix`, если изменения нетривиальные
6. **Используй breaking change notation**, если изменения ломают обратную совместимость
7. **Ссылайся на issues/PRs** в футере, если они связаны с коммитом

## GitLab доска и лейблы

GitLab доска использует лейблы для отображения движения задач по статусам и категориям.

**Важно:**
- **Всегда используй лейблы из `.gitlab/labels.yml`** при создании или обновлении issues/merge requests
- Не создавай новые лейблы без необходимости — сначала проверь существующие в `.gitlab/labels.yml`
- Лейблы используются для фильтрации и организации задач на доске проекта

**Категории лейблов:**
- `component::*` — компоненты платформы
- `track::*` — направления разработки
- `type::*` — типы задач (feature, bug, refactor и т.д.)
- `priority::*` — приоритеты задач
- `status::*` — статусы задач (backlog, in-progress, code-review и т.д.)

## Исключения

- Коммиты типа `chore`, `docs`, `style` обычно не требуют body
- Для мелких исправлений достаточно короткого subject без body
- Breaking changes всегда должны быть явно обозначены

